:root{
  --bg:#f7f7f8;
  --card:#fff;
  --muted:#777;
  --accent:#1a73e8;
  --border:#e6e6e6;
  --gap:12px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN",Meiryo,Arial;background:var(--bg);color:#222}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;background:var(--card);border-bottom:1px solid var(--border)}
.topbar .left,.topbar .center,.topbar .right{display:flex;align-items:center;gap:8px}
.small-avatar{width:32px;height:32px;border-radius:50%;object-fit:cover}
.container{display:flex;gap:16px;padding:16px;max-width:1200px;margin:18px auto}
.leftColumn{flex:1;min-width:320px}
.rightColumn{width:420px}
.arrivalBanner{display:none;padding:10px;border-radius:6px;background:#ff6b6b;color:#fff;margin-bottom:10px;font-weight:700;text-align:center}
.poll-area{margin-bottom:12px}
.poll-content{background:var(--card);padding:12px;border-radius:8px;border:1px solid var(--border)}
.poll-header{display:flex;align-items:center;justify-content:space-between}
.poll-question{font-weight:700}
.poll-options{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.poll-option{display:flex;align-items:center;gap:8px;padding:8px;border-radius:8px;background:#fff;border:1px solid #f0f0f0;cursor:pointer}
.poll-option .bar{height:10px;background:#eee;border-radius:6px;flex:1;position:relative;overflow:hidden}
.poll-option .bar > i{position:absolute;left:0;top:0;bottom:0;background:var(--accent);width:0%;transition:width 400ms}
.poll-option .percent{min-width:44px;text-align:right;font-weight:700;color:var(--muted)}

.commentsContainer{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:10px;max-height:520px;overflow:hidden}
#comments{display:flex;flex-direction:column;gap:10px;overflow-y:auto;padding-right:6px;max-height:440px}
.comment{display:flex;gap:10px;align-items:flex-start;padding:8px;border-bottom:1px solid #f4f4f4}
.comment .avatar{width:40px;height:40px;border-radius:50%;object-fit:cover}
.avatarWrap{position:relative}
.presence-dot{position:absolute;right:-6px;bottom:-6px;width:10px;height:10px;border-radius:50%;border:2px solid #fff;background:#ccc;box-shadow:0 1px 2px rgba(0,0,0,0.12)}
.presence-online{background:#3ddc84}
.presence-offline{background:#ccc}
.comment .meta{flex:1}
.call-badge{margin-left:8px;padding:6px 8px;border-radius:12px;background:#eaf6ff;color:var(--accent);font-weight:700;border:1px solid #cfe9ff;cursor:pointer}

.commentForm{display:flex;gap:8px;margin-top:10px}
.commentForm input[type="text"]{flex:1;padding:10px;border-radius:22px;border:1px solid var(--border);background:#fff}
.commentForm button{padding:8px 14px;border-radius:22px;border:1px solid var(--border);background:#fff;cursor:pointer}

.controls{background:var(--card);padding:12px;border-radius:8px;border:1px solid var(--border)}
.gameArea{margin-top:12px;border-radius:8px;border:1px solid var(--border);background:var(--card)}
.game-header{display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px solid #f4f4f4}
#shogiContainer{padding:12px;display:flex;gap:12px;align-items:flex-start;min-height:360px}

/* 将棋盤 */
.shogiBoard{width:360px;height:360px;background:#f5e7c4;border-radius:6px;padding:8px;box-sizing:border-box;display:flex;flex-direction:column}
.grid{display:grid;grid-template-columns:repeat(9,1fr);gap:2px;flex:1}
.grid-cell{display:flex;align-items:center;justify-content:center;border:1px solid rgba(0,0,0,0.06);min-height:34px;background:transparent;cursor:pointer}
.shogiBoard img{display:block;max-width:70%;max-height:70%;user-select:none;pointer-events:none}
.shogiBoard img.koma-gote{transform:rotate(180deg);transform-origin:center center}

/* modal backdrop and modal */
.modal-backdrop{position:fixed;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.45);opacity:0;pointer-events:none;visibility:hidden;transition:opacity .18s ease,visibility .18s ease;z-index:10000}
.modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(.98);min-width:280px;max-width:92%;z-index:10001;display:none;opacity:0;pointer-events:none;transition:transform .18s ease,opacity .18s ease}
.modal.open{display:block;opacity:1;pointer-events:auto;transform:translate(-50%,-50%) scale(1)}
.modal.open ~ .modal-backdrop{opacity:1;pointer-events:auto;visibility:visible}
.modal .modal-content{background:var(--card);padding:16px;border-radius:8px;box-shadow:0 6px 24px rgba(0,0,0,0.18)}
.modal .modal-content.small{max-width:420px}
.modal .close{position:absolute;top:8px;right:10px;border:none;background:transparent;font-size:18px;cursor:pointer}
.modal input[type="text"], .modal input[type="email"], .modal input[type="password"]{display:block;width:100%;padding:8px;margin:8px 0;border:1px solid var(--border);border-radius:6px}
.modal .modal-actions{margin-top:10px;display:flex;gap:8px;justify-content:flex-end}

.footer{padding:12px;text-align:center;color:var(--muted);font-size:13px}

.gameChoice{padding:8px;border-radius:8px;border:1px solid var(--border);cursor:pointer;background:#fff;margin-bottom:8px}
.gameChoice[data-selected="true"]{background:var(--accent);color:#fff;border-color:rgba(0,0,0,0.08)}
.assetPreview img{max-width:100%;height:auto;border-radius:6px;border:1px solid var(--border)}
.controlBtn{padding:6px 10px;border-radius:6px;border:1px solid var(--border);background:#fff;cursor:pointer}
