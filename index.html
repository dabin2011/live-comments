<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>配信 + コメント + 将棋</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Firebase SDKs must be included separately (not included here) -->
</head>
<body>
  <header class="topbar">
    <div class="left">
      <button id="loginBtn">ログイン</button>
      <button id="mypageBtn" style="display:none">マイページ</button>
      <button id="logoutBtn" style="display:none">ログアウト</button>
    </div>
    <div class="center">
      <strong id="gameTitle">配信ページ</strong>
    </div>
    <div class="right">
      <span id="username"></span>
      <img id="avatar" alt="" class="small-avatar" />
      <span id="myPoints" class="points"></span>
    </div>
  </header>

  <main class="container">
    <section class="leftColumn">
      <div id="arrivalBanner" class="arrivalBanner"></div>

      <!-- Poll area -->
      <div id="pollArea" class="poll-area" style="display:none">
        <div id="pollContent" class="poll-content"></div>
        <div id="pollTimer" class="poll-timer" aria-hidden="true"></div>
      </div>

      <!-- Comments list -->
      <div id="commentsContainer" class="commentsContainer">
        <div id="comments" class="comments" aria-live="polite"></div>
      </div>

      <!-- Comment form -->
      <form id="form" class="commentForm" onsubmit="event.preventDefault(); sendComment();">
        <input id="commentInput" type="text" placeholder="コメントを入力..." autocomplete="off" />
        <button id="sendBtn" type="button">送信</button>
      </form>
    </section>

    <aside class="rightColumn">
      <div class="controls">
        <div class="gameControlsTop">
          <button id="pollBtn">アンケート作成</button>
          <button id="gameBtn">ゲーム</button>
          <button id="uploadPieceBtn">駒画像アップ</button>
          <button id="uploadBoardBtn">盤画像アップ</button>
        </div>

        <div id="gameArea" class="gameArea" style="display:none">
          <div class="game-header">
            <div id="gameControls"></div>
            <div id="gameInfo"></div>
          </div>
          <div id="shogiContainer" class="shogiContainer"></div>
        </div>

        <div id="assetPreview" class="assetPreview"></div>
      </div>
    </aside>
  </main>

  <!-- Modals -->
  <div id="pollModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <button class="close" data-close="pollModal">✕</button>
      <h3>アンケート作成</h3>
      <input id="pollQuestion" type="text" placeholder="質問を入力" />
      <div id="pollOptionsWrapper" class="pollOptionsWrapper">
        <input class="pollOptionInput" type="text" placeholder="選択肢1" />
        <input class="pollOptionInput" type="text" placeholder="選択肢2" />
      </div>
      <div class="modal-actions">
        <button id="addPollOptionBtn" type="button">選択肢追加</button>
        <button id="createPollBtn" type="button">作成</button>
      </div>
    </div>
  </div>

  <div id="gameModal" class="modal" aria-hidden="true">
    <div class="modal-content small">
      <button class="close" data-close="gameModal">✕</button>
      <h3>ゲーム作成</h3>
      <div class="gameChoice" data-game="shogi" role="button">将棋</div>
      <label><input id="publicGame" type="checkbox" /> 観戦許可</label>
      <div class="modal-actions"><button id="startGameBtn" type="button">開始</button></div>
    </div>
  </div>

  <div id="loginModal" class="modal" aria-hidden="true">
    <div class="modal-content small">
      <button class="close" data-close="loginModal">✕</button>
      <h3>ログイン / 新規登録</h3>
      <input id="email" type="email" placeholder="メール" />
      <input id="password" type="password" placeholder="パスワード" />
      <div class="modal-actions">
        <button id="signinBtn" type="button">ログイン</button>
        <button id="signupBtn" type="button">登録</button>
      </div>
    </div>
  </div>

  <div id="mypageModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <button class="close" data-close="mypageModal">✕</button>
      <h3>マイページ</h3>
      <div id="assetPreview"></div>
      <div style="margin-top:12px">
        <label>新しい表示名 <input id="newName" type="text" /></label>
        <button id="updateNameBtn" type="button">更新</button>
      </div>
      <form id="uploadForm" style="margin-top:12px">
        <div>
          <label>駒画像: <input id="pieceImageFile" type="file" accept="image/*" /></label>
        </div>
        <div>
          <label>盤画像: <input id="boardImageFile" type="file" accept="image/*" /></label>
        </div>
      </form>
    </div>
  </div>

  <div id="callRequestPopup" class="modal" aria-hidden="true">
    <div class="modal-content small">
      <button class="close" data-close="callRequestPopup">✕</button>
      <div id="callRequestContent"></div>
      <div class="modal-actions">
        <button id="callSendBtn" type="button">送信</button>
        <button id="callCancelBtn" type="button">キャンセル</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <small>© Example</small>
  </footer>

  <script src="script.js"></script>
</body>
</html>
